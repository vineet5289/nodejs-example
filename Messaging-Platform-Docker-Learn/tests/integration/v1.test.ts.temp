import Mongo from '../../src/db/mongodb';
const Redis = require('../../src/db/redis');
const request = require('supertest');
const app = require('../../src/app');
import {
  getChatRoomJson,
  getChatRoomJsonWhenUserDoesNotExist
} from '../config/chat-room.config';

describe('Create chat room and get details by ID', () => {
  it('Test jest setup', () => {
    expect(true).toBe(true);
  });
  // beforeAll(done => {
  //   Mongo.getInstance(done);
  // });

  // afterAll(done => {
  //   Redis.close(done);
  // });

  // test('Create a chat room and get details by ID', async () => {
  //   // Input Data
  //   const body = getChatRoomJson();
  //   let chatRoom: any;
  //   // Post call to create chat room
  //   await request(app)
  //     .post('/api/v1/chat-room/')
  //     .send(body)
  //     .set('Accept', 'application/json')
  //     .expect('Content-Type', /json/)
  //     .expect(200)
  //     .then((response: any) => {
  //       chatRoom = response.body;
  //       expect(chatRoom.chat_room_title).toBe(body.chat_room_title);
  //     });
  //   // Get API call to load chat room details
  //   await request(app)
  //     .get(`/api/v1/chat-room/` + chatRoom.chat_room_id)
  //     .expect('Content-Type', /json/)
  //     .expect(200)
  //     .then((res: any) => {
  //       expect(res.body.chat_room_title).toBe(chatRoom.chat_room_title);
  //       expect(res.body.chat_room_id).toBe(chatRoom.chat_room_id);
  //     });
  // });
  // test('Create a chat when participant users does not exist', async () => {
  //   // Input Data
  //   const body = getChatRoomJsonWhenUserDoesNotExist();
  //   // Post call to create chat room
  //   await request(app)
  //     .post('/api/v1/chat-room/')
  //     .send(body)
  //     .set('Accept', 'application/json')
  //     .expect(500)
  //     .expect('Content-Type', /json/);
  // });
  // test('Create a chat with empty params should return 500', async () => {
  //   // Input Data
  //   const body = getChatRoomJsonWhenUserDoesNotExist();
  //   // Post call to create chat room
  //   await request(app)
  //     .post('/api/v1/chat-room/')
  //     .send({})
  //     .set('Accept', 'application/json')
  //     .expect(500)
  //     .expect('Content-Type', /json/);
  // });
});
